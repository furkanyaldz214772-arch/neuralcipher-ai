(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2614],{13587:function(e,t,s){Promise.resolve().then(s.bind(s,79611))},79611:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var r=s(3827),a=s(64090),o=s(47907),n=s(58626),l=s(6118),i=s(11147);function c(){let e=(0,o.useRouter)(),{user:t}=(0,l.t)(),[s,c]=(0,a.useState)([]),[x,h]=(0,a.useState)({totalPatients:0,highRiskPatients:0,testsThisMonth:0,avgRiskScore:0}),[u,m]=(0,a.useState)(!0),[b,p]=(0,a.useState)("risk");(0,a.useEffect)(()=>{if((null==t?void 0:t.role)!=="doctor"){e.push("/dashboard");return}g()},[t]);let g=async()=>{try{let[e,t]=await Promise.all([i.Z.get("/api/v1/doctor/patients"),i.Z.get("/api/v1/doctor/stats")]);c(e.data),h(t.data)}catch(e){console.error("Failed to fetch dashboard data:",e)}finally{m(!1)}},v=[...s].sort((e,t)=>"risk"===b?t.risk_score-e.risk_score:"date"===b?new Date(t.latest_test_date).getTime()-new Date(e.latest_test_date).getTime():e.name.localeCompare(t.name));return u?(0,r.jsx)(n.Z,{children:(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("div",{className:"w-12 h-12 border-2 border-electric-cyan border-t-transparent rounded-full animate-spin"})})}):(0,r.jsx)(n.Z,{children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h1",{className:"text-3xl font-sora font-bold text-white mb-2",children:"Doctor Dashboard"}),(0,r.jsx)("p",{className:"text-sm text-gray-400 font-roboto",children:"Monitor and manage your patients"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,r.jsx)(d,{title:"Total Patients",value:x.totalPatients,color:"rgba(100, 255, 218, 0.6)"}),(0,r.jsx)(d,{title:"High Risk",value:x.highRiskPatients,color:"rgba(236, 72, 153, 0.6)"}),(0,r.jsx)(d,{title:"Tests This Month",value:x.testsThisMonth,color:"rgba(132, 204, 22, 0.6)"}),(0,r.jsx)(d,{title:"Avg Risk Score",value:x.avgRiskScore,color:"rgba(139, 92, 246, 0.6)"})]}),(0,r.jsxs)("div",{className:"rounded-xl p-6 mb-6 transition-all duration-200 hover:-translate-y-0.5",style:{background:"rgba(15, 23, 42, 0.6)",border:"1px solid rgba(100, 255, 218, 0.15)",backdropFilter:"blur(10px)"},children:[(0,r.jsx)("h3",{className:"text-base font-sora font-semibold text-white mb-4",children:"Quick Actions"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[(0,r.jsxs)("button",{onClick:()=>e.push("/doctor/patients/new"),className:"flex flex-col items-center p-4 rounded-lg transition-all duration-200 hover:-translate-y-0.5 group",style:{background:"rgba(15, 23, 42, 0.4)",border:"1px solid rgba(100, 255, 218, 0.15)"},children:[(0,r.jsx)("svg",{className:"w-8 h-8 text-electric-cyan mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:2,children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})}),(0,r.jsx)("span",{className:"text-sm font-medium text-white font-roboto group-hover:text-electric-cyan transition-colors",children:"Add Patient"})]}),(0,r.jsxs)("button",{onClick:()=>e.push("/doctor/analytics"),className:"flex flex-col items-center p-4 rounded-lg transition-all duration-200 hover:-translate-y-0.5 group",style:{background:"rgba(15, 23, 42, 0.4)",border:"1px solid rgba(100, 255, 218, 0.15)"},children:[(0,r.jsx)("svg",{className:"w-8 h-8 text-electric-cyan mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:2,children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),(0,r.jsx)("span",{className:"text-sm font-medium text-white font-roboto group-hover:text-electric-cyan transition-colors",children:"Analytics"})]}),(0,r.jsxs)("button",{onClick:()=>e.push("/doctor/reports"),className:"flex flex-col items-center p-4 rounded-lg transition-all duration-200 hover:-translate-y-0.5 group",style:{background:"rgba(15, 23, 42, 0.4)",border:"1px solid rgba(100, 255, 218, 0.15)"},children:[(0,r.jsx)("svg",{className:"w-8 h-8 text-electric-cyan mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:2,children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,r.jsx)("span",{className:"text-sm font-medium text-white font-roboto group-hover:text-electric-cyan transition-colors",children:"Reports"})]}),(0,r.jsxs)("button",{onClick:()=>e.push("/doctor/messages"),className:"flex flex-col items-center p-4 rounded-lg transition-all duration-200 hover:-translate-y-0.5 group",style:{background:"rgba(15, 23, 42, 0.4)",border:"1px solid rgba(100, 255, 218, 0.15)"},children:[(0,r.jsx)("svg",{className:"w-8 h-8 text-electric-cyan mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:2,children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),(0,r.jsx)("span",{className:"text-sm font-medium text-white font-roboto group-hover:text-electric-cyan transition-colors",children:"Messages"})]})]})]}),(0,r.jsxs)("div",{className:"rounded-xl transition-all duration-200 hover:-translate-y-0.5",style:{background:"rgba(15, 23, 42, 0.6)",border:"1px solid rgba(100, 255, 218, 0.15)",backdropFilter:"blur(10px)"},children:[(0,r.jsx)("div",{className:"p-6",style:{borderBottom:"1px solid rgba(100, 255, 218, 0.1)"},children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-base font-sora font-semibold text-white",children:"My Patients"}),(0,r.jsx)("div",{className:"flex items-center space-x-4",children:(0,r.jsxs)("select",{value:b,onChange:e=>p(e.target.value),className:"px-3 py-2 text-sm text-white rounded-lg focus:outline-none font-roboto",style:{background:"rgba(15, 23, 42, 0.4)",border:"1px solid rgba(100, 255, 218, 0.2)"},children:[(0,r.jsx)("option",{value:"risk",children:"By Risk Score"}),(0,r.jsx)("option",{value:"date",children:"By Date"}),(0,r.jsx)("option",{value:"name",children:"By Name"})]})})]})}),(0,r.jsx)("div",{children:0===v.length?(0,r.jsxs)("div",{className:"p-12 text-center",children:[(0,r.jsx)("p",{className:"text-gray-400 font-roboto mb-4",children:"No patients added yet"}),(0,r.jsx)("button",{onClick:()=>e.push("/doctor/patients/new"),className:"px-6 py-2 text-sm rounded-lg font-sora font-medium transition-all duration-200 hover:scale-105",style:{background:"rgba(100, 255, 218, 0.15)",border:"1px solid rgba(100, 255, 218, 0.4)",color:"#64FFDA"},children:"Add Your First Patient"})]}):v.map((e,t)=>{var s,a;return(0,r.jsx)("div",{className:"p-5 cursor-not-allowed opacity-60 transition-all duration-200 group",style:{borderBottom:t<v.length-1?"1px solid rgba(100, 255, 218, 0.1)":"none"},children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4 flex-1",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center",style:{background:"rgba(100, 255, 218, 0.1)",border:"1px solid rgba(100, 255, 218, 0.3)"},children:(0,r.jsx)("span",{className:"text-electric-cyan font-bold text-lg",children:e.name.charAt(0)})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-1",children:[(0,r.jsx)("h4",{className:"font-semibold text-white font-sora group-hover:text-electric-cyan transition-colors",children:e.name}),(0,r.jsx)("span",{className:"px-2 py-0.5 rounded text-xs font-medium ".concat("active"===e.status?"text-green-400":"text-gray-400"),style:{background:"active"===e.status?"rgba(132, 204, 22, 0.1)":"rgba(156, 163, 175, 0.1)",border:"active"===e.status?"1px solid rgba(132, 204, 22, 0.3)":"1px solid rgba(156, 163, 175, 0.3)"},children:"active"===e.status?"Active":"Inactive"})]}),(0,r.jsx)("p",{className:"text-sm text-gray-400 font-roboto",children:e.email}),(0,r.jsxs)("div",{className:"flex items-center space-x-3 mt-1 text-xs text-gray-500 font-roboto",children:[(0,r.jsxs)("span",{children:["Last Test: ",new Date(e.latest_test_date).toLocaleDateString("en-US",{day:"numeric",month:"short"})]}),(0,r.jsx)("span",{children:"â€¢"}),(0,r.jsxs)("span",{children:[e.test_count," tests"]})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 rounded-full flex items-center justify-center",style:{background:(s=e.risk_score)<30?"rgba(132, 204, 22, 0.1)":s<60?"rgba(245, 158, 11, 0.1)":"rgba(236, 72, 153, 0.1)",border:"1px solid ".concat((a=e.risk_score)<30?"rgba(132, 204, 22, 0.6)":a<60?"rgba(245, 158, 11, 0.6)":"rgba(236, 72, 153, 0.6)")},children:(0,r.jsx)("span",{className:"text-xl font-bold text-white font-sora",children:e.risk_score})}),(0,r.jsx)("svg",{className:"w-5 h-5 text-electric-cyan group-hover:translate-x-0.5 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:2,children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]})]})},e.id)})})]})]})})}function d(e){let{title:t,value:s,color:a}=e;return(0,r.jsxs)("div",{className:"group relative overflow-hidden rounded-lg p-3 transition-all duration-200 hover:-translate-y-0.5",style:{background:"rgba(15, 23, 42, 0.4)",border:"1px solid rgba(100, 255, 218, 0.1)",backdropFilter:"blur(10px)"},children:[(0,r.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-0.5 opacity-60 group-hover:opacity-100 transition-opacity",style:{background:a}}),(0,r.jsxs)("div",{className:"relative z-10 pl-2",children:[(0,r.jsx)("p",{className:"text-xs text-gray-500 font-roboto font-medium mb-1",children:t}),(0,r.jsx)("p",{className:"text-xl font-sora font-bold text-white",children:s})]})]})}}},function(e){e.O(0,[5660,9351,1744],function(){return e(e.s=13587)}),_N_E=e.O()}]);