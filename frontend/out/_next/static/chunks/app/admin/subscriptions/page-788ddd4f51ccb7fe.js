(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8296],{67200:function(e,t,s){Promise.resolve().then(s.bind(s,18822))},18822:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var r=s(3827),a=s(64090),l=s(47907),i=s(58626),n=s(6118),d=s(11147);function c(){let e=(0,l.useRouter)(),{user:t,isAuthenticated:s}=(0,n.t)(),[c,o]=(0,a.useState)([]),[x,h]=(0,a.useState)([]),[m,u]=(0,a.useState)(!0),[p,b]=(0,a.useState)("all"),[g,j]=(0,a.useState)("all"),[f,w]=(0,a.useState)({totalRevenue:0,activeSubscriptions:0,mrr:0,churnRate:0});(0,a.useEffect)(()=>{if(!s){e.replace("/auth/login");return}if(t&&"admin"!==t.role){e.replace("/dashboard");return}(null==t?void 0:t.role)==="admin"&&(v(),N())},[t,s,e]),(0,a.useEffect)(()=>{y()},[c,p,g]);let v=async()=>{try{let e=await d.Z.get("/api/v1/admin/subscriptions");o(e.data)}catch(e){console.error("Failed to fetch subscriptions:",e)}finally{u(!1)}},N=async()=>{try{let e=await d.Z.get("/api/v1/admin/subscriptions/stats");w(e.data)}catch(e){console.error("Failed to fetch stats:",e)}},y=()=>{let e=[...c];"all"!==p&&(e=e.filter(e=>e.plan===p)),"all"!==g&&(e=e.filter(e=>e.status===g)),h(e)},k=e=>{switch(e){case"enterprise":return"bg-purple-500/20 text-purple-400 border-purple-500/30";case"premium":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"basic":return"bg-green-500/20 text-green-400 border-green-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}},S=e=>{switch(e){case"active":return"bg-green-500/20 text-green-400 border-green-500/30";case"trial":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"expired":default:return"bg-gray-500/20 text-gray-400 border-gray-500/30";case"cancelled":return"bg-red-500/20 text-red-400 border-red-500/30"}},C=e=>{switch(e){case"paid":return"bg-green-500/20 text-green-400 border-green-500/30";case"pending":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"failed":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}};return m?(0,r.jsx)(i.Z,{children:(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("div",{className:"w-12 h-12 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"})})}):(0,r.jsx)(i.Z,{children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h1",{className:"text-3xl font-sora font-bold text-white mb-2",children:"Subscription Management"}),(0,r.jsx)("p",{className:"text-gray-400 font-roboto",children:"Monitor and manage all subscriptions"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,r.jsx)("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-400 text-sm font-roboto",children:"Total Revenue"}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-white mt-1",children:["$",f.totalRevenue.toLocaleString()]}),(0,r.jsx)("p",{className:"text-green-400 text-xs mt-1",children:"+12% from last month"})]}),(0,r.jsx)("div",{className:"w-12 h-12 bg-green-500/20 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),(0,r.jsx)("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-400 text-sm font-roboto",children:"Active Subscriptions"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-white mt-1",children:f.activeSubscriptions}),(0,r.jsx)("p",{className:"text-green-400 text-xs mt-1",children:"+8% from last month"})]}),(0,r.jsx)("div",{className:"w-12 h-12 bg-blue-500/20 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})})})]})}),(0,r.jsx)("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-400 text-sm font-roboto",children:"MRR"}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-white mt-1",children:["$",f.mrr.toLocaleString()]}),(0,r.jsx)("p",{className:"text-green-400 text-xs mt-1",children:"Monthly Recurring Revenue"})]}),(0,r.jsx)("div",{className:"w-12 h-12 bg-purple-500/20 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})})]})}),(0,r.jsx)("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-400 text-sm font-roboto",children:"Churn Rate"}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-white mt-1",children:[f.churnRate,"%"]}),(0,r.jsx)("p",{className:"text-red-400 text-xs mt-1",children:"-2% from last month"})]}),(0,r.jsx)("div",{className:"w-12 h-12 bg-yellow-500/20 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})]})})]}),(0,r.jsx)("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl p-4 mb-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("select",{value:p,onChange:e=>b(e.target.value),className:"px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white focus:outline-none focus:border-cyan-500",children:[(0,r.jsx)("option",{value:"all",children:"All Plans"}),(0,r.jsx)("option",{value:"free",children:"Free"}),(0,r.jsx)("option",{value:"basic",children:"Basic"}),(0,r.jsx)("option",{value:"premium",children:"Premium"}),(0,r.jsx)("option",{value:"enterprise",children:"Enterprise"})]}),(0,r.jsxs)("select",{value:g,onChange:e=>j(e.target.value),className:"px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white focus:outline-none focus:border-cyan-500",children:[(0,r.jsx)("option",{value:"all",children:"All Status"}),(0,r.jsx)("option",{value:"active",children:"Active"}),(0,r.jsx)("option",{value:"trial",children:"Trial"}),(0,r.jsx)("option",{value:"expired",children:"Expired"}),(0,r.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]})}),(0,r.jsx)("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-white/5 border-b border-white/10",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"User"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Plan"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Payment"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Amount"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Start Date"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"End Date"}),(0,r.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-white/10",children:0===x.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:8,className:"px-6 py-12 text-center text-gray-400",children:"No subscriptions found"})}):x.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-white/5 transition-colors",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm font-medium text-white",children:e.userName}),(0,r.jsx)("div",{className:"text-sm text-gray-400",children:e.userEmail})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full border ".concat(k(e.plan)),children:e.plan.toUpperCase()})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full border ".concat(S(e.status)),children:e.status.toUpperCase()})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full border ".concat(C(e.paymentStatus)),children:e.paymentStatus.toUpperCase()})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white font-semibold",children:["$",e.amount]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-400",children:new Date(e.startDate).toLocaleDateString()}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-400",children:new Date(e.endDate).toLocaleDateString()}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,r.jsx)("button",{className:"text-cyan-400 hover:text-cyan-300 mr-3",children:"View"}),(0,r.jsx)("button",{className:"text-blue-400 hover:text-blue-300",children:"Edit"})]})]},e.id))})]})})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[(0,r.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-white mb-4",children:"Plan Distribution"}),(0,r.jsx)("div",{className:"space-y-3",children:["free","basic","premium","enterprise"].map(e=>{let t=c.filter(t=>t.plan===e).length,s=c.length>0?(t/c.length*100).toFixed(1):0;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,r.jsx)("span",{className:"text-gray-400 capitalize",children:e}),(0,r.jsxs)("span",{className:"text-white font-semibold",children:[t," (",s,"%)"]})]}),(0,r.jsx)("div",{className:"w-full bg-white/10 rounded-full h-2",children:(0,r.jsx)("div",{className:"h-2 rounded-full ".concat("enterprise"===e?"bg-purple-500":"premium"===e?"bg-blue-500":"basic"===e?"bg-green-500":"bg-gray-500"),style:{width:"".concat(s,"%")}})})]},e)})})]}),(0,r.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-white mb-4",children:"Status Overview"}),(0,r.jsx)("div",{className:"space-y-3",children:["active","trial","expired","cancelled"].map(e=>{let t=c.filter(t=>t.status===e).length,s=c.length>0?(t/c.length*100).toFixed(1):0;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,r.jsx)("span",{className:"text-gray-400 capitalize",children:e}),(0,r.jsxs)("span",{className:"text-white font-semibold",children:[t," (",s,"%)"]})]}),(0,r.jsx)("div",{className:"w-full bg-white/10 rounded-full h-2",children:(0,r.jsx)("div",{className:"h-2 rounded-full ".concat("active"===e?"bg-green-500":"trial"===e?"bg-blue-500":"expired"===e?"bg-gray-500":"bg-red-500"),style:{width:"".concat(s,"%")}})})]},e)})})]})]})]})})}}},function(e){e.O(0,[5660,9351,1744],function(){return e(e.s=67200)}),_N_E=e.O()}]);