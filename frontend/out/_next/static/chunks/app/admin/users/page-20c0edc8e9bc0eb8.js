(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9674],{42886:function(e,t,s){Promise.resolve().then(s.bind(s,14882))},14882:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var a=s(3827),r=s(64090),l=s(47907),i=s(58626),n=s(6118),c=s(11147);function d(){let e=(0,l.useRouter)(),{user:t,isAuthenticated:s}=(0,n.t)(),[d,o]=(0,r.useState)([]),[x,h]=(0,r.useState)([]),[m,u]=(0,r.useState)(!0),[p,b]=(0,r.useState)(""),[j,g]=(0,r.useState)("all"),[f,w]=(0,r.useState)("all"),[v,N]=(0,r.useState)("date"),[y,k]=(0,r.useState)(null),[C,L]=(0,r.useState)(!1),[S,M]=(0,r.useState)(!1),[D,A]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(!s){e.replace("/auth/login");return}if(t&&"admin"!==t.role){e.replace("/dashboard");return}(null==t?void 0:t.role)==="admin"&&z()},[t,s,e]),(0,r.useEffect)(()=>{B()},[d,p,j,f,v]);let z=async()=>{try{let e=await c.Z.get("/api/v1/admin/users");o(e.data)}catch(e){console.error("Failed to fetch users:",e)}finally{u(!1)}},B=()=>{let e=[...d];p&&(e=e.filter(e=>e.email.toLowerCase().includes(p.toLowerCase())||"".concat(e.firstName," ").concat(e.lastName).toLowerCase().includes(p.toLowerCase()))),"all"!==j&&(e=e.filter(e=>e.role===j)),"all"!==f&&(e=e.filter(e=>e.status===f)),e.sort((e,t)=>"name"===v?"".concat(e.firstName," ").concat(e.lastName).localeCompare("".concat(t.firstName," ").concat(t.lastName)):"date"===v?new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime():e.role.localeCompare(t.role)),h(e)},E=async e=>{try{await c.Z.delete("/api/v1/admin/users/".concat(e)),o(d.filter(t=>t.id!==e)),M(!1),A(null)}catch(e){console.error("Failed to delete user:",e),alert("Failed to delete user")}},T=async(e,t)=>{try{await c.Z.put("/api/v1/admin/users/".concat(e),{status:t}),o(d.map(s=>s.id===e?{...s,status:t}:s))}catch(e){console.error("Failed to update user status:",e),alert("Failed to update user status")}},U=e=>{switch(e){case"admin":return"bg-purple-500/20 text-purple-400 border-purple-500/30";case"doctor":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"hospital":return"bg-green-500/20 text-green-400 border-green-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}},W=e=>{switch(e){case"active":return"bg-green-500/20 text-green-400 border-green-500/30";case"inactive":default:return"bg-gray-500/20 text-gray-400 border-gray-500/30";case"banned":return"bg-red-500/20 text-red-400 border-red-500/30"}},_={total:d.length,active:d.filter(e=>"active"===e.status).length,patients:d.filter(e=>"patient"===e.role).length,doctors:d.filter(e=>"doctor"===e.role).length};return m?(0,a.jsx)(i.Z,{children:(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"w-12 h-12 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin"})})}):(0,a.jsx)(i.Z,{children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-sora font-bold text-white mb-2",children:"User Management"}),(0,a.jsx)("p",{className:"text-gray-400 font-roboto",children:"Manage all system users and permissions"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,a.jsx)("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-400 text-sm font-roboto",children:"Total Users"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-white mt-1",children:_.total})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-blue-500/20 rounded-lg flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})})]})}),(0,a.jsx)("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-400 text-sm font-roboto",children:"Active Users"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-white mt-1",children:_.active})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-green-500/20 rounded-lg flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),(0,a.jsx)("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-400 text-sm font-roboto",children:"Patients"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-white mt-1",children:_.patients})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-purple-500/20 rounded-lg flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})]})}),(0,a.jsx)("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-400 text-sm font-roboto",children:"Doctors"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-white mt-1",children:_.doctors})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-cyan-500/20 rounded-lg flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-cyan-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})})]})})]}),(0,a.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl p-4 mb-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)("div",{className:"md:col-span-2",children:(0,a.jsx)("input",{type:"text",placeholder:"Search by name or email...",value:p,onChange:e=>b(e.target.value),className:"w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-cyan-500"})}),(0,a.jsxs)("select",{value:j,onChange:e=>g(e.target.value),className:"px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white focus:outline-none focus:border-cyan-500",children:[(0,a.jsx)("option",{value:"all",children:"All Roles"}),(0,a.jsx)("option",{value:"patient",children:"Patient"}),(0,a.jsx)("option",{value:"doctor",children:"Doctor"}),(0,a.jsx)("option",{value:"admin",children:"Admin"}),(0,a.jsx)("option",{value:"hospital",children:"Hospital"})]}),(0,a.jsxs)("select",{value:f,onChange:e=>w(e.target.value),className:"px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white focus:outline-none focus:border-cyan-500",children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"active",children:"Active"}),(0,a.jsx)("option",{value:"inactive",children:"Inactive"}),(0,a.jsx)("option",{value:"banned",children:"Banned"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-4",children:[(0,a.jsx)("span",{className:"text-gray-400 text-sm",children:"Sort by:"}),(0,a.jsx)("button",{onClick:()=>N("date"),className:"px-3 py-1 rounded-lg text-sm ".concat("date"===v?"bg-cyan-500/20 text-cyan-400":"text-gray-400 hover:text-white"),children:"Date"}),(0,a.jsx)("button",{onClick:()=>N("name"),className:"px-3 py-1 rounded-lg text-sm ".concat("name"===v?"bg-cyan-500/20 text-cyan-400":"text-gray-400 hover:text-white"),children:"Name"}),(0,a.jsx)("button",{onClick:()=>N("role"),className:"px-3 py-1 rounded-lg text-sm ".concat("role"===v?"bg-cyan-500/20 text-cyan-400":"text-gray-400 hover:text-white"),children:"Role"})]})]}),(0,a.jsx)("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-white/5 border-b border-white/10",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"User"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Role"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Joined"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Last Login"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-white/10",children:0===x.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-400",children:"No users found"})}):x.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-white/5 transition-colors",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("div",{className:"w-10 h-10 bg-gradient-to-br from-cyan-500 to-blue-500 rounded-full flex items-center justify-center text-white font-bold",children:[e.firstName[0],e.lastName[0]]}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsxs)("div",{className:"text-sm font-medium text-white",children:[e.firstName," ",e.lastName]}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:e.email})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full border ".concat(U(e.role)),children:e.role})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full border ".concat(W(e.status)),children:e.status})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-400",children:new Date(e.createdAt).toLocaleDateString()}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-400",children:e.lastLogin?new Date(e.lastLogin).toLocaleDateString():"Never"}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,a.jsx)("button",{onClick:()=>{k(e),L(!0)},className:"text-cyan-400 hover:text-cyan-300 mr-3",children:"View"}),(0,a.jsx)("button",{onClick:()=>{A(e),M(!0)},className:"text-red-400 hover:text-red-300",children:"Delete"})]})]},e.id))})]})})}),C&&y&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,a.jsx)("div",{className:"bg-[#0A0E27] border border-white/10 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white",children:"User Details"}),(0,a.jsx)("button",{onClick:()=>L(!1),className:"text-gray-400 hover:text-white",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-gray-400 text-sm",children:"Name"}),(0,a.jsxs)("p",{className:"text-white text-lg",children:[y.firstName," ",y.lastName]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-gray-400 text-sm",children:"Email"}),(0,a.jsx)("p",{className:"text-white",children:y.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-gray-400 text-sm",children:"Role"}),(0,a.jsx)("p",{className:"text-white capitalize",children:y.role})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-gray-400 text-sm",children:"Status"}),(0,a.jsxs)("select",{value:y.status,onChange:e=>T(y.id,e.target.value),className:"mt-1 w-full px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white focus:outline-none focus:border-cyan-500",children:[(0,a.jsx)("option",{value:"active",children:"Active"}),(0,a.jsx)("option",{value:"inactive",children:"Inactive"}),(0,a.jsx)("option",{value:"banned",children:"Banned"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-gray-400 text-sm",children:"Joined"}),(0,a.jsx)("p",{className:"text-white",children:new Date(y.createdAt).toLocaleString()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-gray-400 text-sm",children:"Last Login"}),(0,a.jsx)("p",{className:"text-white",children:y.lastLogin?new Date(y.lastLogin).toLocaleString():"Never"})]}),void 0!==y.testCount&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-gray-400 text-sm",children:"Total Tests"}),(0,a.jsx)("p",{className:"text-white",children:y.testCount})]})]}),(0,a.jsx)("div",{className:"flex gap-3 mt-6",children:(0,a.jsx)("button",{onClick:()=>L(!1),className:"flex-1 px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white hover:bg-white/10 transition-colors",children:"Close"})})]})})}),S&&D&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,a.jsx)("div",{className:"bg-[#0A0E27] border border-red-500/30 rounded-xl max-w-md w-full",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-red-500/20 rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-white",children:"Delete User"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"This action cannot be undone"})]})]}),(0,a.jsxs)("p",{className:"text-gray-300 mb-6",children:["Are you sure you want to delete ",(0,a.jsxs)("span",{className:"font-bold text-white",children:[D.firstName," ",D.lastName]}),"?"]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>{M(!1),A(null)},className:"flex-1 px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white hover:bg-white/10 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{onClick:()=>E(D.id),className:"flex-1 px-4 py-2 bg-red-500 hover:bg-red-600 rounded-lg text-white font-semibold transition-colors",children:"Delete"})]})]})})})]})})}}},function(e){e.O(0,[5660,9351,1744],function(){return e(e.s=42886)}),_N_E=e.O()}]);